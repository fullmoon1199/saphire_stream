// src/components/cards/CornerThreeBlob.jsx
import { motion } from "framer-motion";
import { useId } from "react";

export default function CornerThreeBlob({
  show = false,
  className = "absolute right-0 top-0 h-[100px]] w-[100px]", // Tailwind 위치/크기
  bgColor = "#FFFFFF",     // 흰 블롭 색(페이지 배경과 맞추면 자연스러움)
  dotColor = "#0D71D3",    // 파란 동그라미 색
  spring = { stiffness: 420, damping: 26 }, // 애니메이션 감쇠/탄성
}) {
  const uid = useId(); // clipPath id 충돌 방지

  return (
    <motion.svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 80 80"
      className={className}
      initial={{ x: 80, y: -80, scale: 0.4, opacity: 0 }}   // ⬅️ 더 멀리, 더 작게 시작
      animate={
        show
          ? { x: 0, y: 0, scale: 1, opacity: 1 }
          : { x: 80, y: -80, scale: 0.4, opacity: 0 }
      }
      transition={{
        type: "tween",        // 스프링 대신 시간 기반
        duration: 0.3,        // 전체 재생 시간 (초)
        ease: "easeOut",      // 가속 곡선 (easeIn, easeOut, easeInOut 등 가능)
      }}
      aria-hidden
    >
      {/* ====== 원본 SVG 구조 (색상만 prop로 제어) ====== */}
      <g clipPath={`url(#clip0_${uid})`}>
        <path
          d="M-27.636 -14.7391H27.6365V40.5333H22.7468C25.7222 36.3126 27.4822 31.0983 27.4822 25.4542C27.482 11.3962 16.5735 0.00012207 3.11792 0.00012207C-10.3375 0.000278473 -21.2452 11.3963 -21.2454 25.4542C-21.2454 31.0982 -19.4863 36.3126 -16.511 40.5333H-27.636V-14.7391Z"
          fill={bgColor}
        />
      </g>

      <path
        d="M27.6365 0H80.0001V52.3636H56.7274C40.6609 52.3636 27.6365 39.3392 27.6365 23.2727V0Z"
        fill={bgColor}
      />

      {/* 파란 동그라미(라운드 사각) */}
      <rect x="34.9092" width="45.0909" height="45.0909" rx="22.5455" fill={dotColor} />

      {/* 하얀 아이콘(화살표/체크 라인) */}
      <path
        d="M62.9093 17.0909H54.0457C53.8648 17.0909 53.6914 17.0191 53.5636 16.8912C53.4357 16.7634 53.3639 16.5899 53.3639 16.4091C53.3639 16.2283 53.4357 16.0549 53.5636 15.927C53.6914 15.7991 53.8648 15.7273 54.0457 15.7273H63.5911C63.772 15.7273 63.9454 15.7991 64.0732 15.927C64.2011 16.0549 64.2729 16.2283 64.2729 16.4091V25.9546C64.2729 26.1354 64.2011 26.3088 64.0732 26.4367C63.9454 26.5646 63.772 26.6364 63.5911 26.6364C63.4103 26.6364 63.2369 26.5646 63.109 26.4367C62.9811 26.3088 62.9093 26.1354 62.9093 25.9546V17.0909Z"
        fill="#FFFFFF"
      />
      <path
        d="M63.1083 15.9264C63.2363 15.7984 63.4099 15.7264 63.591 15.7264C63.7721 15.7264 63.9457 15.7984 64.0737 15.9264C64.2018 16.0544 64.2737 16.2281 64.2737 16.4091C64.2737 16.5902 64.2018 16.7638 64.0737 16.8918L52.4828 28.4828C52.3548 28.6108 52.1812 28.6827 52.0001 28.6827C51.819 28.6827 51.6454 28.6108 51.5174 28.4828C51.3893 28.3547 51.3174 28.1811 51.3174 28C51.3174 27.819 51.3893 27.6453 51.5174 27.5173L63.1083 15.9264Z"
        fill="#FFFFFF"
      />

      <g clipPath={`url(#clip1_${uid})`}>
        <path
          d="M24.7275 37.6245H80V92.897H75.1104C78.0857 88.6762 79.8457 83.4619 79.8457 77.8179C79.8455 63.7599 68.937 52.3638 55.4814 52.3638C42.026 52.3639 31.1183 63.7599 31.1182 77.8179C31.1182 83.4618 32.8773 88.6763 35.8525 92.897H24.7275V37.6245Z"
          fill={bgColor}
        />
      </g>

      <defs>
        <clipPath id={`clip0_${uid}`}>
          <rect
            width="27.6364"
            height="27.6364"
            fill="#FFFFFF"
            transform="matrix(-1 0 0 -1 27.6365 27.6364)"
          />
        </clipPath>
        <clipPath id={`clip1_${uid}`}>
          <rect
            width="27.6364"
            height="27.6364"
            fill="#FFFFFF"
            transform="matrix(-1 0 0 -1 80 80)"
          />
        </clipPath>
      </defs>
    </motion.svg>
  );
}
